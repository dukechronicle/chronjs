include ../mixins/layout-helpers

!!! 5
html(lang="en", xmlns:fb="http://ogp.me/ns/fb#")
    - if (typeof article !== undefined)
        prefix = "og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# article: http://ogp.me/ns/article#";

    head(prefix=prefix)
        script(src="/js/mobile-redirect.js?v=4")

        if (typeof pageTitle != 'undefined')
            title #{pageTitle} | The Chronicle
        else
            title The Chronicle | Duke University's Daily Independent Newspaper

        - if (typeof pageImage == 'undefined')
          - var pageImage = staticCdn + "/img/favicon.png"
        link(rel="image_src", href=pageImage)
        link(rel="icon", href=staticCdn + "/img/favicon.ico")

        // typekitload code should always load first because it will cause a relayout of dom
        script(src="http://use.typekit.com/dwv2bjy.js")
        script try{Typekit.load()}catch(e){}

        mixin stylesheet("site")
        //if lt IE 9
            script(type="text/javascript", src="//html5shim.googlecode.com/svn/trunk/html5.js")
            mixin stylesheet("style-ie")

        !=partial("code/google-analytics")
        !=partial("code/feedback")

        - if (typeof article !== "undefined")
            // opengraph
            meta(property="og:title", content=doc.title)
            //meta(property="og:published_time", content=published_time)
            meta(property="og:type", content="article")
            meta(property="og:url", content=doc.fullUrl)
            meta(property="og:description", content=doc.teaser)
            if (typeof pageImage != 'undefined')
                meta(property="og:image", content=pageImage)
            else
                meta(property="og:image", content=staticCdn + "/img/favicon.png")

            meta(property="og:image:width", content="200")
            meta(property-"og:image:height", content="200")
            meta(property="og:site_name", content="The Chronicle")
            meta(property="fb:app_id", content="335954613131615")
    body
        // required for facebook javascript sdk
        #fb-root
        .container
            header.clearfix!=partial('layout/header')
            section.clearfix#content!=body
            footer!=partial('layout/footer')
        #scripts
            // border-radius support in ie
            //if lt IE 9
                script(type="text/javascript") var curvyCornersVerbose = false
                script(type="text/javascript", src="/js/curvycorners.js")

            mixin require-script("site")
