#article
    section
        .nav.clearfix
            - each parent in parentPaths
                h2
                    a(href='/section'+parent.path+'/'+parent.name) #{parent.name}

    article
        .content.rounded
            // edit button
            if (typeof isAdmin != 'undefined' && isAdmin)
                a.edit(href=doc.url + "/edit") Edit
            h1 #{doc.title}
            // article image
            if (doc.embed)
                .embed!=doc.embed
            else
                if (doc.images && doc.images.LargeRect && doc.images.LargeRect.url)
                    if (typeof isAdmin != 'undefined' && isAdmin && doc.images.Original)
                        a(href="/admin/image/"+doc.images.Original.name)
                            img.article(src=doc.images.LargeRect.url)
                    else
                        img.article(src=doc.images.LargeRect.url)

            // caption
            if (doc.images && doc.images.Original && doc.images.LargeRect)
                p.photo-credit #{doc.images.Original.photographer}
                p.photo-caption #{doc.images.Original.caption}

            // author and date
            .metadata
                span.credit
                    | By !{doc.authorsHtml} &nbsp; | &nbsp; #{doc.date}

            // social media, print and comments
            .social-media
                .comments
                    a(id='commentLink', href='#dsq-content') Comments
                .print
                    a(href=doc.url + '/print') Print
                .facebook
                    iframe(src='http://www.facebook.com/plugins/like.php?app_id=176268009080455&amp;href=' + encodeURIComponent(doc.fullUrl) + '&amp;send=false&amp;layout=button_count&amp;width=121&amp;show_faces=false&amp;action=recommend&amp;colorscheme=light&amp;font=lucida+grande&amp;height=20', scrolling='no', frameborder='0', style='border:none; overflow:hidden; width:121px; height:20px;', allowTransparency='true')
                .twitter
                    a.twitter-share-button(href="http://twitter.com/share?via=dukechronicle" )
                        | Tweet
                .google
                    g:plusone(size="medium")
            .article-body!=doc.renderedBody

        .sidebar
            - if (model.related && model.related.length > 0)
                .related!=partial('../container/articles-with-subhead', {title: "Related", stories: model.related})

             // advertising
            .image-container.medium-rectangle!=partial('ad/medium-rect', {title: "Advertisement"})

            .container.clearfix.facebook-recommendations(style="margin-bottom: 20px")
                .vertical-container
                    h2.vertical Facebook Recommended
                .rounded(style="width: 300px; height: 300px; background: white")
                    .fb-recommendations(data-site="dukechronicle.com", data-border-color="white", data-width="300", data-height="300", data-font="lucida grande", data-header="true", max-age="7")
            script
                (function(d, s, id) {
                    var js, fjs = d.getElementsByTagName(s)[0];
                    if (d.getElementById(id)) {return;}
                    js = d.createElement(s); js.id = id;
                    js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
                    fjs.parentNode.insertBefore(js, fjs);
                }(document, 'script', 'facebook-jssdk'));

            - if (model.popular && model.popular.length > 0)
                .numbered-articles.most-popular!=partial('../container/numbered-articles', {title: "Popular", stories: model.popular})

    // comments
    #disqus_thread.rounded

script(type="text/javascript")
    CHRONICLE.onload.push(function () {
        loadDisqusForArticle(#{isProduction}, '#{disqusData.shortname}',
                             '#{disqusData.id}', '#{disqusData.title.replace(/'/g,"\\'")}',
                             '#{disqusData.url}');
        configureAppendCommentCount();
    });

script(src="http://platform.twitter.com/widgets.js", type="text/javascript")
script(type="text/javascript")
    (function() {
    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = 'https://apis.google.com/js/plusone.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
    })();
